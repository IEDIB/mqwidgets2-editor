(function(e){function t(t){for(var o,d,n=t[0],c=t[1],s=t[2],u=0,b=[];u<n.length;u++)d=n[u],Object.prototype.hasOwnProperty.call(i,d)&&i[d]&&b.push(i[d][0]),i[d]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);r&&r(t);while(b.length)b.shift()();return a.push.apply(a,s||[]),l()}function l(){for(var e,t=0;t<a.length;t++){for(var l=a[t],o=!0,n=1;n<l.length;n++){var c=l[n];0!==i[c]&&(o=!1)}o&&(a.splice(t--,1),e=d(d.s=l[0]))}return e}var o={},i={app:0},a=[];function d(t){if(o[t])return o[t].exports;var l=o[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,d),l.l=!0,l.exports}d.m=e,d.c=o,d.d=function(e,t,l){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(d.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)d.d(l,o,function(t){return e[t]}.bind(null,o));return l},d.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var s=0;s<n.length;s++)t(n[s]);var r=c;a.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("cd49")},6813:function(e,t,l){},c352:function(e,t,l){"use strict";l("6813")},cd49:function(e,t,l){"use strict";l.r(t);var o=l("7a23");const i={id:"app"},a=Object(o["i"])("div",{class:"app-container"},[Object(o["i"])("h1",null,"MQwidgets2 editor"),Object(o["i"])("small",null,"Josep Mulet (c) 2022")],-1),d=Object(o["i"])("h4",null,"Load content into the editor",-1),n=Object(o["i"])("label",{for:"theLoadCode"},"Paste the HTML code",-1),c=Object(o["k"])("Load"),s=Object(o["i"])("hr",null,null,-1),r=Object(o["k"])(" Preview "),u=Object(o["i"])("p",null,[Object(o["i"])("br")],-1),b={id:"preview_area"},p=Object(o["i"])("p",null,[Object(o["i"])("br")],-1),m={key:0},h=Object(o["i"])("label",{for:"shareCode"},"Embed code",-1);function O(e,t,l,O,j,f){const w=Object(o["w"])("TextArea"),g=Object(o["w"])("Button"),y=Object(o["w"])("Dialog"),v=Object(o["w"])("widget-component");return Object(o["q"])(),Object(o["h"])("div",i,[a,Object(o["l"])(y,{visible:e.showLoadDlg,"onUpdate:visible":t[3]||(t[3]=t=>e.showLoadDlg=t)},{header:Object(o["C"])(()=>[d]),footer:Object(o["C"])(()=>[Object(o["l"])(g,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:t[1]||(t[1]=t=>e.onCancelLoad())}),Object(o["l"])(g,{label:"Accept",icon:"pi pi-check",autofocus:"",onClick:t[2]||(t[2]=t=>e.onLoad())})]),default:Object(o["C"])(()=>[n,Object(o["l"])(w,{id:"theLoadCode",modelValue:e.contentsToLoad,"onUpdate:modelValue":t[0]||(t[0]=t=>e.contentsToLoad=t),style:{width:"99%"},rows:"5"},null,8,["modelValue"])]),_:1},8,["visible"]),Object(o["l"])(g,{onClick:t[4]||(t[4]=t=>e.onShowLoadDlg())},{default:Object(o["C"])(()=>[c]),_:1}),(Object(o["q"])(!0),Object(o["h"])(o["a"],null,Object(o["u"])(e.mqgroup.widgets,e=>(Object(o["q"])(),Object(o["h"])("div",{key:e.id},[Object(o["l"])(v,{widget:e},null,8,["widget"])]))),128)),s,Object(o["l"])(g,{onClick:t[5]||(t[5]=t=>e.preview()),icon:"pi pi-refresh"}),r,u,Object(o["D"])(Object(o["i"])("div",b,null,512),[[o["B"],e.shareCode]]),p,e.shareCode?(Object(o["q"])(),Object(o["h"])("div",m,[h,Object(o["l"])(w,{id:"shareCode",modelValue:e.shareCode,"onUpdate:modelValue":t[6]||(t[6]=t=>e.shareCode=t),autoResize:!0,rows:"5",cols:"30",style:{width:"95%"}},null,8,["modelValue"])])):Object(o["g"])("",!0)])}var j=l("ade3"),f=l("9ab4"),w=l("ce1f");const g=Object(o["i"])("label",{for:"def_desc"},"Question description (HTML)",-1),y=Object(o["i"])("br",null,null,-1),v=Object(o["i"])("label",{for:"def_desc2"},"Additional description (HTML)",-1),C=Object(o["i"])("br",null,null,-1),V=Object(o["i"])("hr",null,null,-1),x=Object(o["i"])("label",{for:"def_editor"},[Object(o["k"])("Widget type"),Object(o["i"])("sup",null,"*")],-1),_={key:0},k=Object(o["i"])("label",{for:"def_ini"},"Initial content (LaTeX) ",-1),L={key:1},S=Object(o["i"])("label",{for:"def_choices0"},"Options ",-1),M=Object(o["i"])("p",null,[Object(o["i"])("br")],-1),q=Object(o["i"])("label",{for:"def_rightchoice"},"Right option (from 0) ",-1),T={key:2},P=Object(o["i"])("label",{for:"def_choices"},"Symbols ",-1),U=Object(o["i"])("label",{for:"def_rightchoice"},"Right answer (Sympy) ",-1),A=Object(o["i"])("label",{for:"rules_forbidden"},"Symbols that are forbidden in the answer",-1),E=Object(o["i"])("label",{for:"rules_forbidden"},"Symbols that are required in the answer",-1),R=Object(o["i"])("p",null,null,-1),D=Object(o["i"])("label",{for:"rules_factor"},"The answer must be factorized",-1),J=Object(o["i"])("p",null,null,-1),I=Object(o["i"])("label",{for:"rules_expanded"},"The answer must be expanded",-1),z=Object(o["i"])("p",null,null,-1),H=Object(o["i"])("label",{for:"rules_precision"},"Precision",-1),N=Object(o["i"])("p",null,null,-1),W=Object(o["i"])("label",{for:"rules_expanded"},"Regard coma as decimal place",-1),B={key:3},Q=Object(o["i"])("label",{for:"def_paletes"},"Editor paletes ",-1);function F(e,t,l,i,a,d){const n=Object(o["w"])("TextArea"),c=Object(o["w"])("InputText"),s=Object(o["w"])("Dropdown"),r=Object(o["w"])("Button"),u=Object(o["w"])("Column"),b=Object(o["w"])("DataTable"),p=Object(o["w"])("Chips"),m=Object(o["w"])("Checkbox"),h=Object(o["w"])("InputNumber"),O=Object(o["w"])("AccordionTab"),j=Object(o["w"])("Accordion"),f=Object(o["w"])("MultiSelect"),w=Object(o["w"])("Panel");return Object(o["q"])(),Object(o["f"])(w,{toggleable:!0,class:"mq-widget-component"},{header:Object(o["C"])(()=>[Object(o["k"])(" Widget "+Object(o["z"])(e.widget.id),1)]),default:Object(o["C"])(()=>[g,y,Object(o["l"])(n,{id:"def_dec",modelValue:e.widget.htmlContent,"onUpdate:modelValue":t[0]||(t[0]=t=>e.widget.htmlContent=t),autoResize:!0,rows:"3",cols:"30",style:{width:"95%"}},null,8,["modelValue"]),v,C,Object(o["l"])(c,{id:"def_dec2",type:"label",modelValue:e.widget.def.formulation,"onUpdate:modelValue":t[1]||(t[1]=t=>e.widget.def.formulation=t),style:{width:"95%"}},null,8,["modelValue"]),V,x,Object(o["l"])(s,{id:"def_editor",modelValue:e.widget.def.editor,"onUpdate:modelValue":t[2]||(t[2]=t=>e.widget.def.editor=t),options:e.editorOptions,optionLabel:"label",optionValue:"value",onChange:t[3]||(t[3]=t=>e.editorChange())},null,8,["modelValue","options"]),e.hasInitialOpt?(Object(o["q"])(),Object(o["h"])("div",_,[k,Object(o["l"])(c,{id:"def_ini",type:"text",modelValue:e.widget.def.initial_latex,"onUpdate:modelValue":t[4]||(t[4]=t=>e.widget.def.initial_latex=t)},null,8,["modelValue"])])):Object(o["g"])("",!0),["mchoice","mchoice*"].indexOf(e.widget.def.editor)>=0?(Object(o["q"])(),Object(o["h"])("div",L,[S,Object(o["l"])(b,{id:"def_choices0",value:e.widget.def.symbols,editMode:"cell",onCellEditComplete:e.onCellEditComplete,class:"editable-cells-table",responsiveLayout:"scroll",onRowReorder:e.onSymbolReorder},{default:Object(o["C"])(()=>[Object(o["l"])(r,{onClick:t[5]||(t[5]=t=>e.addChoice()),class:"p-button-rounded p-button-success p-button-sm",icon:"pi pi-plus"}),Object(o["l"])(u,{rowReorder:!0,headerStyle:"width: 3rem",reorderableColumn:!1}),Object(o["l"])(u,{field:"name",header:"Option",key:"name",style:{width:"80%"}},{body:Object(o["C"])(e=>[Object(o["k"])(Object(o["z"])(e.data.name),1)]),editor:Object(o["C"])(({data:e,field:t})=>[Object(o["l"])(c,{modelValue:e[t],"onUpdate:modelValue":l=>e[t]=l,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),Object(o["l"])(u,{exportable:!1,style:{"min-width":"8rem"}},{body:Object(o["C"])(t=>[Object(o["l"])(r,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning",onClick:l=>e.deleteSymbol(t.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","onCellEditComplete","onRowReorder"]),M,q,Object(o["l"])(c,{id:"def_rightchoice",type:"number",modelValue:e.widget.def.ans,"onUpdate:modelValue":t[6]||(t[6]=t=>e.widget.def.ans=t)},null,8,["modelValue"])])):Object(o["g"])("",!0),["mchoice","mchoice*"].indexOf(e.widget.def.editor)<0?(Object(o["q"])(),Object(o["h"])("div",T,[P,Object(o["l"])(r,{onClick:t[7]||(t[7]=t=>e.addChoice()),class:"p-button-rounded p-button-success p-button-sm",icon:"pi pi-plus"}),Object(o["l"])(b,{id:"def_choices",value:e.widget.def.symbols,editMode:"cell",onCellEditComplete:e.onCellEditComplete,class:"editable-cells-table",responsiveLayout:"scroll",onRowReorder:e.onSymbolReorder},{default:Object(o["C"])(()=>[Object(o["l"])(u,{rowReorder:!0,headerStyle:"width: 3rem",reorderableColumn:!1}),Object(o["l"])(u,{field:"name",header:"Variable",key:"name",style:{width:"20%"}},{body:Object(o["C"])(e=>[Object(o["k"])(Object(o["z"])(e.data.name),1)]),editor:Object(o["C"])(({data:e,field:t})=>[Object(o["l"])(c,{modelValue:e[t],"onUpdate:modelValue":l=>e[t]=l,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),Object(o["l"])(u,{field:"value",header:"Value",key:"value",style:{width:"60%"}},{body:Object(o["C"])(e=>[Object(o["k"])(Object(o["z"])(e.data.value),1)]),editor:Object(o["C"])(({data:e,field:t})=>[Object(o["l"])(c,{modelValue:e[t],"onUpdate:modelValue":l=>e[t]=l,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),Object(o["l"])(u,{exportable:!1,style:{"min-width":"8rem"}},{body:Object(o["C"])(t=>[Object(o["l"])(r,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning",onClick:l=>e.deleteSymbol(t.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","onCellEditComplete","onRowReorder"]),U,Object(o["l"])(n,{id:"def_rightchoice",style:{width:"95%"},autoResize:!0,modelValue:e.widget.def.ans,"onUpdate:modelValue":t[8]||(t[8]=t=>e.widget.def.ans=t)},null,8,["modelValue"])])):Object(o["g"])("",!0),Object(o["l"])(j,null,{default:Object(o["C"])(()=>[Object(o["l"])(O,{header:"Rules"},{default:Object(o["C"])(()=>[A,Object(o["l"])(p,{id:"rules_forbidden",modelValue:e.widget.def.rules.forbidden,"onUpdate:modelValue":t[9]||(t[9]=t=>e.widget.def.rules.forbidden=t),style:{width:"96%"}},null,8,["modelValue"]),E,Object(o["l"])(p,{id:"rules_forbidden",modelValue:e.widget.def.rules.required,"onUpdate:modelValue":t[10]||(t[10]=t=>e.widget.def.rules.required=t),style:{width:"96%"}},null,8,["modelValue"]),R,D,Object(o["l"])(m,{id:"rules_factor",modelValue:e.widget.def.rules.factor,"onUpdate:modelValue":t[11]||(t[11]=t=>e.widget.def.rules.factor=t),binary:!0},null,8,["modelValue"]),J,I,Object(o["l"])(m,{id:"rules_expanded",modelValue:e.widget.def.rules.expand,"onUpdate:modelValue":t[12]||(t[12]=t=>e.widget.def.rules.expand=t),binary:!0},null,8,["modelValue"]),z,H,Object(o["l"])(h,{id:"rules_precision",mode:"decimal",locale:"es-ES",minFractionDigits:2,maxFractionDigits:8,modelValue:e.widget.def.rules.precision,"onUpdate:modelValue":t[13]||(t[13]=t=>e.widget.def.rules.precision=t)},null,8,["modelValue"]),N,W,Object(o["l"])(m,{id:"rules_expanded",modelValue:e.widget.def.rules.coma_as_decimal,"onUpdate:modelValue":t[14]||(t[14]=t=>e.widget.def.rules.coma_as_decimal=t),binary:!0},null,8,["modelValue"])]),_:1})]),_:1}),e.hasPaletesOpt?(Object(o["q"])(),Object(o["h"])("div",B,[Q,Object(o["l"])(f,{id:"def_paletes",modelValue:e.widget.def.palettes,"onUpdate:modelValue":t[15]||(t[15]=t=>e.widget.def.palettes=t),options:e.paletesOptions,optionLabel:"label",optionValue:"value"},null,8,["modelValue","options"])])):Object(o["g"])("",!0)]),_:1})}l("b7ef");function $(e){const t=atob(e),l=JSON.parse(t);return["mchoice","mchoice*"].indexOf(l.editor)>=0?l.symbols=l.symbols.map(e=>({name:e,value:""})):l.symbols=l.symbols.map(e=>{const t=e.split(":=");return{name:t[0],value:t[1]}}),l}function G(e){const t=JSON.parse(JSON.stringify(e));return delete t["symbols"],["mchoice","mchoice*"].indexOf(e.editor)>=0?t.symbols=e.symbols.map(e=>e.name):t.symbols=e.symbols.map(e=>e.name+":="+e.value),btoa(JSON.stringify(t))}class X{constructor(e,t){Object(j["a"])(this,"htmlContent",void 0),Object(j["a"])(this,"def",void 0),Object(j["a"])(this,"id",void 0),this.id="mqw_"+Math.random().toString(32).substring(2),this.htmlContent=t||"Express the polynomial \\(x^2+x-2\\) into factors",this.def=e||{editor:"simple",symbols:[{name:"p",value:"x**2+x-2"}],ans:"factor(p)",initial_latex:"(x+ )(x- )",rules:{factor:!0},palettes:["all"]}}share(){const e=G(this.def);return`<p data-mq="${e}">${this.htmlContent}</p>`}}let K=class extends w["b"]{constructor(...e){super(...e),Object(j["a"])(this,"widget",void 0),Object(j["a"])(this,"editorOptions",void 0),Object(j["a"])(this,"paletesOptions",void 0),Object(j["a"])(this,"hasPaletesOpt",!0),Object(j["a"])(this,"hasInitialOpt",!0)}created(){if(console.log("Created"),["panel","simple"].indexOf(this.widget.def.editor)>=0)this.hasPaletesOpt=!0;else{this.hasPaletesOpt=!1;const e=this.widget.def.palettes;e.splice(0,e.length)}this.hasInitialOpt=["basic","simple","panel"].indexOf(this.widget.def.editor)>=0}data(){const e=[{label:"Basic",value:"basic"},{label:"Simple",value:"simple"},{label:"Panel",value:"panel"},{label:"Cloze",value:"cloze"},{label:"Multiple choice (dropdown)",value:"mchoice"},{label:"Multiple choice (checkbox)",value:"mchoice*"}],t=[{label:"All",value:"all"},{label:"General",value:"general"},{label:"Intervals",value:"intervals"},{label:"Geometry",value:"geometria"},{label:"Functions",value:"funcions"}];return{editorOptions:e,paletesOptions:t}}editorChange(){console.log(this.widget.def);const e=this.widget.def.palettes;["panel","simple"].indexOf(this.widget.def.editor)>=0?(this.hasPaletesOpt=!0,e.indexOf("all")<0&&e.push("all")):(this.hasPaletesOpt=!1,e.splice(0,e.length)),this.hasInitialOpt=["basic","simple","panel"].indexOf(this.widget.def.editor)>=0}onCellEditComplete(e){const{data:t,newValue:l,field:o}=e;switch(o){case"quantity":case"price":this.isPositiveInteger(l)?t[o]=l:e.preventDefault();break;default:l.trim().length>0?t[o]=l:e.preventDefault();break}}isPositiveInteger(e){let t=String(e);if(t=t.trim(),!t)return!1;t=t.replace(/^0+/,"")||"0";const l=Math.floor(Number(t));return l!==1/0&&String(l)===t&&l>=0}addChoice(){console.log("Add choice"),this.widget.def.symbols.push({name:"a",value:"1"})}onSymbolReorder(e){this.widget.def.symbols=e.value}deleteSymbol(e){const t=this.widget.def.symbols;for(let l=t.length-1;l>=0;l--){const o=t[l];console.log(o,e),o.name==e.name&&t.splice(l,1)}}};K=Object(f["a"])([Object(w["a"])({props:{widget:X}})],K);var Y=K,Z=l("6b0d"),ee=l.n(Z);const te=ee()(Y,[["render",F]]);var le=te;class oe{static parse(e){const t=document.createElement("div");t.style.display="none",t.innerHTML=e;const l=t.querySelectorAll("[data-mq]"),o=new oe;return l.forEach(e=>{const t=e.getAttribute("data-mq");if(t){const l=$(t);o.addWidget(l,e.innerHTML)}}),o}constructor(){Object(j["a"])(this,"widgets",void 0),this.widgets=[]}addWidget(e,t){const l=new X(e,t);this.widgets.push(l)}share(){const e=this.widgets.map(e=>e.share());return`<div class="pw-mq-group">\n        ${e}\n        </div>`}}let ie=class extends w["b"]{constructor(...e){super(...e),Object(j["a"])(this,"mqgroup",new oe),Object(j["a"])(this,"shareCode",""),Object(j["a"])(this,"showLoadDlg",!1),Object(j["a"])(this,"contentsToLoad","")}mounted(){let e=document.createElement("link");e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css",e.rel="stylesheet",document.head.appendChild(e),e=document.createElement("link"),e.href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css",e.rel="stylesheet",document.head.appendChild(e);let t=document.createElement("script");t.setAttribute("src","https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"),t.setAttribute("id","MathJax-script"),t.setAttribute("type","text/javascript"),t.setAttribute("async",""),document.head.appendChild(t),t=document.createElement("script"),t.setAttribute("src","https://code.jquery.com/jquery-3.6.0.min.js"),document.head.appendChild(t),t=document.createElement("script"),t.setAttribute("src","https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"),document.head.appendChild(t),t=document.createElement("script"),t.setAttribute("src","https://piworld.es/iedib/matheditor/mqwidgets2.js"),document.head.appendChild(t)}created(){console.log("App created"),this.mqgroup.addWidget()}preview(){const e=document.getElementById("preview_area");this.shareCode=this.mqgroup.share(),e.innerHTML=this.shareCode,window.MathJax&&(window.MathJax.typesetPromise&&window.MathJax.typesetPromise(),window.MathJax.Hub&&window.MathJax.Hub.Queue&&window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])),setTimeout((function(){window.MQWidgets.reflow()}),500)}onShowLoadDlg(){this.contentsToLoad="",this.showLoadDlg=!0}onCancelLoad(){this.showLoadDlg=!1}onLoad(){if(this.showLoadDlg=!1,this.contentsToLoad)try{this.mqgroup=oe.parse(this.contentsToLoad),this.shareCode=""}catch(e){console.error(e)}}};ie=Object(f["a"])([Object(w["a"])({components:{WidgetComponent:le}})],ie);var ae=ie;l("c352");const de=ee()(ae,[["render",O]]);var ne=de,ce=l("9319"),se=l("8398"),re=l("bb57"),ue=l("4147"),be=l("0100"),pe=l("4c62"),me=l("1e2d"),he=l("5b2c"),Oe=l("6f85"),je=l("5bd2"),fe=l("de53"),we=l("c8c8"),ge=l("2052"),ye=l("bae7"),ve=l("3822");l("098b"),l("e1ae"),l("4121");const Ce=Object(o["e"])(ne);Ce.use(ce["a"]),Ce.component("InputText",se["a"]),Ce.component("TextArea",pe["a"]),Ce.component("Button",re["a"]),Ce.component("MultiSelect",ue["a"]),Ce.component("Dropdown",be["a"]),Ce.component("Panel",me["a"]),Ce.component("DataTable",he["a"]),Ce.component("Column",Oe["a"]),Ce.component("Dialog",je["a"]),Ce.component("Accordion",fe["a"]),Ce.component("AccordionTab",we["a"]),Ce.component("Checkbox",ge["a"]),Ce.component("Chips",ye["a"]),Ce.component("InputNumber",ve["a"]),Ce.mount("#app")}});
//# sourceMappingURL=app.c408ddc2.js.map